# 南峰黑私房手作系统
# 目录--设计接口+知识点
## 用户管理
实现用户的注册、登录功能，集成JWT进行身份认证与权限控制，确保系统安全访问。

**核心逻辑**
1. 用户注册  

首先用户传入registerDTO[用户名，密码，手机号]，

然后UserService进行注册，并给用户分配ID,创建用户对象（加密密码）。  

若库中无重名数据则注册成功，返回data[用户ID:name]到前端；
2. 用户登录  

用户传入UserLoginDTO[name,password]进login  

login:1.查找username；2.验证password 3.生成token并返回  
jwtUtil.generateToken(userDO.getUsername()):1.创建当前时间和过期时间（当前时间+配置的过期秒数）

2.使用JJWT库构建JWT token：设置主题(subject)为传入的用户标识+设置签发时间+设置过期时间+使用HS512算法和密钥签名

在JWT中，Token由三部分组成，用点(.)分隔：

Header（头部）：由JJWT库自动创建,包含算法信息：{"alg": "HS512", "typ": "JWT"}

Payload（载荷）：sub (subject)：用户名+iat (issued at)：签发时间+exp (expiration)

Signature（签名）：

由JJWT库使用HS512算法生成

通过对Header和Payload的Base64编码字符串，加上密钥(jwtConfig.getSecret())进行签名
## 商品管理
支持商品的上架、下架、分类管理及库存控制，满足商品信息维护和展示需求。
## 订单管理
处理用户通过微信下单的操作，支持自取和快递两种配送方式的选择，并记录完整订单流程。
## 优惠券管理
提供优惠券的发放、使用规则配置、有效期管理等功能，增强营销活动灵活性。
## 限购与预售管理
对特定商品设置购买数量上限，同时支持早鸟票预售时间及价格策略设定。
## 促销活动管理
支持限时优惠活动的定时开启与关闭，配合Spring Task实现自动化任务调度。
## 缓存管理
利用Redis缓存热点数据提升系统性能，结合Spring Cache实现本地多级缓存机制。
## 消息通知管理
基于RocketMQ异步处理订单状态变更通知、日志记录等后台任务，提高响应效率。
## 实时通信管理
通过WebSocket实现实时订单状态推送以及客服在线聊天功能，增强用户体验。
## 文件存储管理
集成阿里云OSS实现图片及文档类资源的安全上传与管理，保障多媒体内容存储稳定。
## 数据导入导出管理
基于POI组件提供Excel格式的数据批量导入与导出能力，方便运营人员操作。
## 外部接口调用管理
使用HttpClient发起对外部系统的HTTP请求，用于对接第三方服务如支付网关或物流平台。
## 数据库访问管理
采用MyBatis框架进行MySQL数据库的CRUD操作，并结合PageHelper实现数据分页查询功能。
